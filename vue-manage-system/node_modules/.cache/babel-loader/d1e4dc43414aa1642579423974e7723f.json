{"remainingRequest":"/Users/chrisju/vue/vue-manage-system/node_modules/babel-loader/lib/index.js!/Users/chrisju/vue/vue-manage-system/src/main.js","dependencies":[{"path":"/Users/chrisju/vue/vue-manage-system/src/main.js","mtime":1576209762986},{"path":"/Users/chrisju/vue/vue-manage-system/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chrisju/vue/vue-manage-system/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/chrisju/vue/vue-manage-system/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"/Users/chrisju/vue/vue-manage-system/node_modules/core-js/modules/es6.array.iterator.js\";\nimport \"/Users/chrisju/vue/vue-manage-system/node_modules/core-js/modules/es6.promise.js\";\nimport \"/Users/chrisju/vue/vue-manage-system/node_modules/core-js/modules/es6.object.assign.js\";\nimport \"/Users/chrisju/vue/vue-manage-system/node_modules/core-js/modules/es7.promise.finally.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Vue from 'vue';\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport ElementUI from 'element-ui';\nimport VueI18n from 'vue-i18n';\nimport { messages } from \"./components/common/i18n\";\nimport 'element-ui/lib/theme-chalk/index.css'; // 默认主题\n// import './assets/css/theme-green/index.css'; // 浅绿色主题\n\nimport \"./assets/css/icon.css\";\nimport \"./components/common/directives\";\nimport 'babel-polyfill';\nVue.config.productionTip = false;\nVue.use(VueI18n);\nVue.use(ElementUI, {\n  size: 'small'\n});\nvar i18n = new VueI18n({\n  locale: 'zh',\n  messages: messages\n}); //使用钩子函数对路由进行权限跳转\n\nrouter.beforeEach(function (to, from, next) {\n  document.title = \"\".concat(to.meta.title, \" | vue-manage-system\");\n  var role = localStorage.getItem('name');\n\n  if (!role && to.path !== '/login') {\n    next('/login');\n  } else if (to.meta.permission) {\n    store.dispatch('GetInfo').then(function (res) {\n      // 拉取用户信息\n      var roles = res.data.roles; // note: roles must be a array! such as: ['editor','develop']\n\n      console.log('roles?', roles);\n      store.dispatch('GenerateRoutes', {\n        roles: roles\n      }).then(function () {\n        // 根据roles权限生成可访问的路由表\n        console.log('addrouters', store.getters.addRouters);\n        router.addRoutes(store.getters.addRouters); // 动态添加可访问路由表\n\n        next(_objectSpread({}, to, {\n          replace: true\n        })); // hack方法 确保addRoutes已完成 ,set the replace: true so the navigation will not leave a history record\n      });\n    }).catch(function () {\n      store.dispatch('FedLogOut').then(function () {\n        Message.error('验证失败,请重新登录');\n        next({\n          path: '/login'\n        });\n      });\n    });\n  } else {\n    // 简单的判断IE10及以下不进入富文本编辑器，该组件不兼容\n    if (navigator.userAgent.indexOf('MSIE') > -1 && to.path === '/editor') {\n      Vue.prototype.$alert('vue-quill-editor组件不兼容IE10及以下浏览器，请使用更高版本的浏览器查看', '浏览器不兼容通知', {\n        confirmButtonText: '确定'\n      });\n    } else {\n      next();\n    }\n  }\n});\nnew Vue({\n  router: router,\n  i18n: i18n,\n  render: function render(h) {\n    return h(App);\n  }\n}).$mount('#app');",{"version":3,"sources":["/Users/chrisju/vue/vue-manage-system/src/main.js"],"names":["Vue","App","router","ElementUI","VueI18n","messages","config","productionTip","use","size","i18n","locale","beforeEach","to","from","next","document","title","meta","role","localStorage","getItem","path","permission","store","dispatch","then","res","roles","data","console","log","getters","addRouters","addRoutes","replace","catch","Message","error","navigator","userAgent","indexOf","prototype","$alert","confirmButtonText","render","h","$mount"],"mappings":"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","sourcesContent":["import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport router from './router';\r\nimport ElementUI from 'element-ui';\r\nimport VueI18n from 'vue-i18n';\r\nimport { messages } from './components/common/i18n';\r\nimport 'element-ui/lib/theme-chalk/index.css'; // 默认主题\r\n// import './assets/css/theme-green/index.css'; // 浅绿色主题\r\nimport './assets/css/icon.css';\r\nimport './components/common/directives';\r\nimport 'babel-polyfill';\r\n\r\nVue.config.productionTip = false;\r\nVue.use(VueI18n);\r\nVue.use(ElementUI, {\r\n    size: 'small'\r\n});\r\nconst i18n = new VueI18n({\r\n    locale: 'zh',\r\n    messages\r\n});\r\n\r\n//使用钩子函数对路由进行权限跳转\r\nrouter.beforeEach((to, from, next) => {\r\n    document.title = `${to.meta.title} | vue-manage-system`;\r\n    const role = localStorage.getItem('name');\r\n    if (!role && to.path !== '/login') {\r\n        next('/login');\r\n    } else if (to.meta.permission) {\r\n        store.dispatch('GetInfo').then(res => { // 拉取用户信息\r\n            const roles = res.data.roles // note: roles must be a array! such as: ['editor','develop']\r\n            console.log('roles?', roles)\r\n            store.dispatch('GenerateRoutes', { roles }).then(() => { // 根据roles权限生成可访问的路由表\r\n            console.log('addrouters', store.getters.addRouters)\r\n            router.addRoutes(store.getters.addRouters) // 动态添加可访问路由表\r\n            next({ ...to, replace: true }) // hack方法 确保addRoutes已完成 ,set the replace: true so the navigation will not leave a history record\r\n          })\r\n        }).catch(() => {\r\n          store.dispatch('FedLogOut').then(() => {\r\n            Message.error('验证失败,请重新登录')\r\n            next({ path: '/login' })\r\n          })\r\n        })\r\n    } else {\r\n        // 简单的判断IE10及以下不进入富文本编辑器，该组件不兼容\r\n        if (navigator.userAgent.indexOf('MSIE') > -1 && to.path === '/editor') {\r\n            Vue.prototype.$alert('vue-quill-editor组件不兼容IE10及以下浏览器，请使用更高版本的浏览器查看', '浏览器不兼容通知', {\r\n                confirmButtonText: '确定'\r\n            });\r\n        } else {\r\n            next();\r\n        }\r\n    }\r\n});\r\n\r\nnew Vue({\r\n    router,\r\n    i18n,\r\n    render: h => h(App)\r\n}).$mount('#app');\r\n"]}]}